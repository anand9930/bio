# ==============================================================================
# BIOMED RESEARCH AI - Environment Variables Template
# ==============================================================================
# Copy this file to .env.local and fill in your actual values
# DO NOT commit .env.local to version control
# ==============================================================================

# ------------------------------------------------------------------------------
# APP CONFIGURATION
# ------------------------------------------------------------------------------
# Set to 'development' or 'production'
# development = no auth, local SQLite, unlimited queries
# production = full auth, Supabase, billing, rate limits
NEXT_PUBLIC_APP_MODE=development

# Your app URL (use http://localhost:3000 for local development)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ------------------------------------------------------------------------------
# VALYU API (REQUIRED)
# ------------------------------------------------------------------------------
# Provides all biomedical data: PubMed articles, clinical trials, FDA drug labels,
# and other specialized medical databases
# Get your API key at: https://platform.valyu.ai
VALYU_API_KEY=your_valyu_api_key_here
# ------------------------------------------------------------------------------
# MODEL PROVIDER CONFIGURATION
# ------------------------------------------------------------------------------
# Choose between "anthropic" and "openai"
# Defaults to "anthropic" if not specified
MODEL_PROVIDER=anthropic

# ------------------------------------------------------------------------------
# ANTHROPIC API (REQUIRED WHEN MODEL_PROVIDER=anthropic)
# ------------------------------------------------------------------------------
# Used for Claude AI models (Sonnet, Opus, Haiku)
# Get your API key at: https://console.anthropic.com
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ------------------------------------------------------------------------------
# ANTHROPIC PROMPT CACHING (OPTIONAL)
# ------------------------------------------------------------------------------
# Enable prompt caching for system prompts to reduce costs and latency
# Caching reduces input token costs by ~90% after initial cache creation
# Recommended: true for production, can set to false for debugging
# Default: true (enabled)
ANTHROPIC_ENABLE_PROMPT_CACHING=true

# ------------------------------------------------------------------------------
# OPENAI API (REQUIRED WHEN MODEL_PROVIDER=openai)
# ------------------------------------------------------------------------------
# Used for GPT models when MODEL_PROVIDER=openai
# Get your API key at: https://platform.openai.com
OPENAI_API_KEY=sk-your_openai_api_key_here

# ------------------------------------------------------------------------------
# VERCEL AI GATEWAY (OPTIONAL - Enhanced AI Features)
# ------------------------------------------------------------------------------
# Enables intelligent routing, provider failover, cost optimization, and unified monitoring
# Get credentials at: https://vercel.com/docs/ai-gateway
# NOTE: Automatically uses OIDC authentication on Vercel deployments if API key not set

# Gateway API Key (optional - OIDC auth used on Vercel if omitted)
AI_GATEWAY_API_KEY=vck_4ZTDIO5qE3HEFgECZI3cW3QP85ccH7b6GrVMhOVaSY8NyjJ1hR4OYmZx

# Gateway routing strategy (default: disabled)
# - "disabled" (default): Use direct API keys only, no gateway
# - "fallback": Use direct API keys primarily, gateway as backup
# - "primary": Use gateway primarily, direct API keys as backup
# - "gateway-only": Only use gateway (requires AI_GATEWAY_API_KEY)
AI_GATEWAY_STRATEGY=disabled

# Provider failover order (comma-separated, used when strategy != "disabled")
# Example: "anthropic,openai" tries Anthropic first, falls back to OpenAI
# Example: "vertex,anthropic,openai" tries Vertex AI, then Anthropic, then OpenAI
AI_GATEWAY_PROVIDER_ORDER=

# Model fallbacks (comma-separated, format: provider/model)
# Used when primary model fails or is unavailable
# Example: "anthropic/claude-3-5-haiku-20241022,openai/gpt-4o-mini"
AI_GATEWAY_MODEL_FALLBACKS=

# Enable per-user usage tracking tags (true/false)
# Adds user ID and tier tags to gateway requests for detailed monitoring
AI_GATEWAY_ENABLE_USER_TRACKING=true

# Enable feature-based tagging (true/false)
# Tags requests by feature (chat, title-generation, etc.)
AI_GATEWAY_ENABLE_FEATURE_TAGS=true

# ------------------------------------------------------------------------------
# DAYTONA API (REQUIRED)
# ------------------------------------------------------------------------------
# Used for secure Python code execution (statistical analysis, pharmacokinetic modeling, data visualization)
# Get your API key at: https://daytona.io
DAYTONA_API_KEY=your_daytona_api_key_here
DAYTONA_API_URL=https://api.daytona.io
DAYTONA_TARGET=latest

# ------------------------------------------------------------------------------
# SUPABASE (REQUIRED FOR PRODUCTION)
# ------------------------------------------------------------------------------
# Only needed when NEXT_PUBLIC_APP_MODE=production
# Get these from: https://supabase.com → Project Settings → API

# Your Supabase project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase anonymous (public) key
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here

# Supabase service role key (KEEP SECRET - never expose client-side)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# ------------------------------------------------------------------------------
# POLAR BILLING (OPTIONAL - Production Mode Only)
# ------------------------------------------------------------------------------
# Only needed if you want subscription billing
# Get these from: https://polar.sh

# Webhook secret for verifying Polar webhook signatures
POLAR_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Product ID for your unlimited subscription tier
POLAR_UNLIMITED_PRODUCT_ID=prod_your_product_id_here

# Skip webhook verification in development (set to 'true' only for local testing)
POLAR_SKIP_WEBHOOK_VERIFICATION=false

# ------------------------------------------------------------------------------
# ENTERPRISE FEATURES (OPTIONAL)
# ------------------------------------------------------------------------------
# Set to 'true' to enable enterprise contact options (banner, sidebar button, etc.)
NEXT_PUBLIC_ENTERPRISE=false

# ------------------------------------------------------------------------------
# ANALYTICS (OPTIONAL)
# ------------------------------------------------------------------------------
# PostHog for analytics and feature flags
# Get these from: https://posthog.com
NEXT_PUBLIC_POSTHOG_KEY=phc_your_posthog_key_here
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# ------------------------------------------------------------------------------
# EXAMPLE CONFIGURATIONS
# ------------------------------------------------------------------------------

# Development Mode with Anthropic (Recommended - Easy Setup):
# NEXT_PUBLIC_APP_MODE=development
# MODEL_PROVIDER=anthropic
# ANTHROPIC_API_KEY=sk-ant-xxx
# VALYU_API_KEY=valyu_xxx
# DAYTONA_API_KEY=xxx

# Development Mode with OpenAI (Alternative):
# NEXT_PUBLIC_APP_MODE=development
# MODEL_PROVIDER=openai
# OPENAI_API_KEY=sk-xxx
# VALYU_API_KEY=valyu_xxx
# DAYTONA_API_KEY=xxx

# Production Mode with Anthropic (Full Setup - Auth + Billing):
# NEXT_PUBLIC_APP_MODE=production
# NEXT_PUBLIC_APP_URL=https://yourdomain.com
# MODEL_PROVIDER=anthropic
# ANTHROPIC_API_KEY=sk-ant-xxx
# VALYU_API_KEY=valyu_xxx
# DAYTONA_API_KEY=xxx
# NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
# SUPABASE_SERVICE_ROLE_KEY=xxx
# POLAR_WEBHOOK_SECRET=whsec_xxx
# POLAR_UNLIMITED_PRODUCT_ID=prod_xxx

# Production Mode with OpenAI (Alternative):
# NEXT_PUBLIC_APP_MODE=production
# NEXT_PUBLIC_APP_URL=https://yourdomain.com
# MODEL_PROVIDER=openai
# OPENAI_API_KEY=sk-xxx
# VALYU_API_KEY=valyu_xxx
# DAYTONA_API_KEY=xxx
# NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
# SUPABASE_SERVICE_ROLE_KEY=xxx
# POLAR_WEBHOOK_SECRET=whsec_xxx
# POLAR_UNLIMITED_PRODUCT_ID=prod_xxx
